# Tor Guard Relay Configuration Example
# Copy this file, customize it, and mount it to /etc/tor/torrc

# ============================================================================
# REQUIRED: Basic Relay Information
# ============================================================================

# Your relay's nickname (alphanumeric, 1-19 characters)
Nickname MyTorRelay

# Contact information (email + optional PGP key)
# This helps the Tor Project contact you about issues
ContactInfo your-email@example.com <0xYOUR_PGP_FINGERPRINT>

# ============================================================================
# REQUIRED: Network Configuration
# ============================================================================

# ORPort - The port for incoming Tor connections
# Common choices: 443, 9001, or any port > 1024
# IPv4 only
ORPort 9001

# IPv4 + IPv6 (recommended if you have IPv6)
# Use the same port number for both IPv4 and IPv6
# ORPort [::]:9001

# DirPort - Directory information port (optional but recommended for guards)
# Common choices: 80, 9030, or any port > 1024
# Set to 0 to disable directory serving
DirPort 9030

# ============================================================================
# REQUIRED: Relay Type
# ============================================================================

# Set to 0 to run as a guard/middle relay (NOT an exit relay)
# IMPORTANT: Do NOT change this unless you understand exit relay legal risks
ExitRelay 0

# Disable SOCKS proxy (we're a relay, not a client)
SocksPort 0

# Explicit exit policy: reject all exit traffic
ExitPolicy reject *:*

# ============================================================================
# REQUIRED: Data & Logging
# ============================================================================

# Where Tor stores its data (keys, state, etc.)
DataDirectory /var/lib/tor

# Log level and location (file + stdout for container logs)
Log notice file /var/log/tor/notices.log
Log notice stdout

# ============================================================================
# OPTIONAL: Bandwidth Limits
# ============================================================================

# Limit bandwidth to prevent overwhelming your connection
# Adjust these values based on your available bandwidth

# Option 1: Relay-specific bandwidth (recommended for relays)
# Average bandwidth (sustained rate)
RelayBandwidthRate 10 MBytes

# Burst bandwidth (temporary spikes)
RelayBandwidthBurst 20 MBytes

# Option 2: Global bandwidth limits (applies to all Tor traffic)
# BandwidthRate 10 MBytes
# BandwidthBurst 20 MBytes

# Note: Use RelayBandwidthRate/Burst for guard relays to avoid limiting
# directory and other non-relay traffic. Use BandwidthRate/Burst if you
# want to limit ALL Tor traffic including directory requests.

# Alternatively, use AccountingMax to limit monthly traffic:
# AccountingStart month 1 00:00
# AccountingMax 500 GB

# ============================================================================
# OPTIONAL: Performance Tuning
# ============================================================================

# Number of CPU cores to use
# Set to 0 for auto-detect, or specify manually
NumCPUs 2

# Maximum number of connections
# Default is usually fine, but you can increase for high-bandwidth relays
# MaxMemInQueues 512 MB

# ============================================================================
# OPTIONAL: Advanced Settings
# ============================================================================

# If you're behind NAT and need to advertise a different IP
# Address YOUR.PUBLIC.IP.HERE

# If your ISP blocks certain ports, you can use a different ORPort
# ORPort 443

# Enable if you want to be a directory mirror
# DirPort 80

# ============================================================================
# Security Notes
# ============================================================================

# 1. NEVER set ExitRelay to 1 unless you:
#    - Understand the legal implications
#    - Have proper legal protection
#    - Are willing to handle abuse complaints
#
# 2. Use a dedicated server/VPS for relay operation
#
# 3. Keep your contact info up to date
#
# 4. Monitor your relay regularly using:
#    docker exec guard-relay status
#
# 5. Check Tor Metrics after 24-48 hours:
#    https://metrics.torproject.org/rs.html

# ============================================================================
# Helpful Resources
# ============================================================================

# Official Tor Relay Guide:
# https://community.torproject.org/relay/

# Tor Relay Requirements:
# https://community.torproject.org/relay/relays-requirements/

# Good/Bad Relays Criteria:
# https://community.torproject.org/relay/community-resources/good-bad-isps/